!function(i){"use strict";function t(i,t){Gumby&&Gumby.debug("Initializing Validation",i),this.$this=i,this.$field=this.$this.parents(".field"),this.req=t||function(){return!!this.$this.val().length};var e=this;this.$this.is("[type=checkbox], [type=radio]")?(this.$field=this.$this.parent("label"),this.$field.on("gumby.onChange",function(){e.validate()})):this.$this.is("select")?(this.$field=this.$this.parents(".picker"),this.$field.on("change",function(){e.validate()})):this.$this.on("blur",function(i){9!==i.which&&e.validate()})}t.prototype.validate=function(){var i=this.req(this.$this);return i?this.$field.removeClass("danger").addClass("success"):this.$field.removeClass("success").addClass("danger"),i},i.fn.validation=function(e){var s=i.extend({submit:!1,fail:!1,required:[]},e),n=[];return this.each(function(){if(!s.required.length)return!1;var e,a=i(this),r=s.required.length;for(e=0;r>e;e++)n.push(new t(a.find('[name="'+s.required[e].name+'"]'),s.required[e].validate||!1));a.on("submit",function(i){var t=!1;if(!a.data("passed")){i.preventDefault();var e,r=n.length;for(e=0;r>e;e++)n[e].validate()||(t=!0);if(t){if(s.fail&&"function"==typeof s.fail)return s.fail(),void 0}else{if(s.submit&&"function"==typeof s.submit)return s.submit(a.serializeArray()),void 0;a.data("passed",!0).submit()}}})})}}(jQuery);